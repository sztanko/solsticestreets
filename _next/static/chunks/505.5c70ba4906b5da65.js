"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[505],{7909:function(t,r,e){e.r(r);var n=e(5893),a=e(9941),c=e(795),o=e(8303),i=e(2471),s=e(1664),l=e(944);e(5729),e(7329),e(4542);function h(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,a,c=[],o=!0,i=!1;try{for(e=e.call(t);!(o=(n=e.next()).done)&&(c.push(n.value),!r||c.length!==r);o=!0);}catch(s){i=!0,a=s}finally{try{o||null==e.return||e.return()}finally{if(i)throw a}}return c}}(t,r)||d(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,r){if(t){if("string"===typeof t)return h(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(t,r):void 0}}var m=function(t){(0,a.Sx)();var r,e=.9*t.width/2,c=Array.from(Array(36).keys()).map((function(t){var r=Math.PI/36*t,a=e*Math.cos(r),c=e*Math.sin(r);return(0,n.jsx)("line",{x1:-a,y1:-c,x2:a,y2:c},r)})),o={width:t.width,height:t.width+100},i=t.stats.street_histogram.map(Math.round);console.log(i);var h=(r=Math).max.apply(r,f(i)),d=l.Z().domain([0,h]).range([0,e]),m=Math.PI/180,y=function(t,r){return[t*Math.cos(r-Math.PI/2),t*Math.sin(r-Math.PI/2)]},p=i.map((function(t,r){var e=d(t),a=r*m,c=y(e,a),o=y(e,a+m),i="M0,0 L".concat(c[0],",").concat(c[1]," L").concat(o[0],",").concat(o[1]," L").concat(-o[0],",").concat(-o[1]," L").concat(-c[0],",").concat(-c[1]," L0,0");return(0,n.jsx)("path",{d:i,id:"path_".concat(r)},r)}));console.log(t.stats);var b=t.stats.sun_azimuths.map((function(t,r){var a=u(y(e,t*Math.PI/180),2),c=a[0],o=a[1];return(0,n.jsx)("line",{x1:-c,y1:-o,x2:c,y2:o,className:"azimuth_line sun_azimuth_".concat(r)},r)}));return(0,n.jsx)("div",{className:"leaflet-bottom leaflet-left",children:(0,n.jsxs)("div",{className:"leaflet-control leaflet-bar street-stats",style:o,children:[(0,n.jsxs)("h2",{children:[t.city.name,", ",t.city.country]}),(0,n.jsx)("svg",{width:t.width,height:t.width,children:(0,n.jsxs)("g",{transform:"translate(".concat(t.width/2,", ").concat(t.width/2,")"),children:[(0,n.jsxs)("g",{className:"base",children:[(0,n.jsx)("g",{className:"ticks",children:c}),(0,n.jsx)("circle",{className:"circle-p10",r:1*e,cx:0,cy:0}),(0,n.jsx)("circle",{className:"circle-p9",r:.9*e,cx:0,cy:0}),(0,n.jsx)("circle",{className:"circle-p05",r:.5*e,cx:0,cy:0})]}),(0,n.jsx)("g",{className:"streets",children:p}),(0,n.jsx)("g",{className:"sun_azimuths",children:b})]})}),(0,n.jsx)("p",{children:(0,n.jsx)(s.default,{href:"/",children:(0,n.jsx)("a",{children:"<< Back to the city list"})})})]})})};r.default=function(t){var r=[(t.info.bb[0][1]+t.info.bb[1][1])/2,(t.info.bb[0][0]+t.info.bb[1][0])/2],e=l.Z().domain([0,3]).range(["red","white"]),a=l.Z().domain([0,3]).range(["orange","white"]);return(0,n.jsxs)(c.h,{center:r,zoom:12,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[(0,n.jsx)(o.I,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),(0,n.jsx)(i.Q,{data:t.streets,style:function(t){return{color:(t.properties.slope<90?e:a)(t.properties.sun_diff)}},onEachFeature:function(t,r){var e=t.properties,n="difference from perfect alignment: ".concat(e.sun_diff.toPrecision(2)," degrees");e.name&&e.name.length>0&&(n="".concat(e.name,": ").concat(n)),r.bindTooltip(n)}}),(0,n.jsx)(m,{stats:t.stats,city:t.info,width:400})]})}}}]);