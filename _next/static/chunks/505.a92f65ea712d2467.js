"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[505],{7909:function(t,e,r){r.r(e);var n=r(5893),a=r(9941),o=r(795),c=r(8303),i=r(2471),s=r(1664),l=r(2767);r(5729),r(7329),r(4542);function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);c=!0);}catch(s){i=!0,a=s}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"===typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}var m=function(t){(0,a.Sx)();var e,r=.9*t.width/2,o=Array.from(Array(36).keys()).map((function(t){var e=Math.PI/36*t,a=r*Math.cos(e),o=r*Math.sin(e);return(0,n.jsx)("line",{x1:-a,y1:-o,x2:a,y2:o},e)})),c={width:t.width,height:t.width+100},i=t.stats.street_histogram.map(Math.round);console.log(i);var h=(e=Math).max.apply(e,f(i)),d=l.Z().domain([0,h]).range([0,r]),m=Math.PI/180,y=function(t,e){return[t*Math.cos(e-Math.PI/2),t*Math.sin(e-Math.PI/2)]},p=i.map((function(t,e){var r=d(t),a=e*m,o=y(r,a),c=y(r,a+m),i="M0,0 L".concat(o[0],",").concat(o[1]," L").concat(c[0],",").concat(c[1]," L").concat(-c[0],",").concat(-c[1]," L").concat(-o[0],",").concat(-o[1]," L0,0");return(0,n.jsx)("path",{d:i,id:"path_".concat(e)},e)}));console.log(t.stats);var x=t.stats.sun_azimuths.map((function(t,e){var a=u(y(r,t*Math.PI/180),2),o=a[0],c=a[1];return(0,n.jsx)("line",{x1:-o,y1:-c,x2:o,y2:c,className:"azimuth_line sun_azimuth_".concat(e)},e)}));return(0,n.jsx)("div",{className:"leaflet-bottom leaflet-left",children:(0,n.jsxs)("div",{className:"leaflet-control leaflet-bar street-stats",style:c,children:[(0,n.jsxs)("h2",{children:[t.city.name,", ",t.city.country]}),(0,n.jsx)("svg",{width:t.width,height:t.width,children:(0,n.jsxs)("g",{transform:"translate(".concat(t.width/2,", ").concat(t.width/2,")"),children:[(0,n.jsxs)("g",{className:"base",children:[(0,n.jsx)("g",{className:"ticks",children:o}),(0,n.jsx)("circle",{className:"circle-p10",r:1*r,cx:0,cy:0}),(0,n.jsx)("circle",{className:"circle-p9",r:.9*r,cx:0,cy:0}),(0,n.jsx)("circle",{className:"circle-p05",r:.5*r,cx:0,cy:0})]}),(0,n.jsx)("g",{className:"streets",children:p}),(0,n.jsx)("g",{className:"sun_azimuths",children:x})]})}),(0,n.jsx)("p",{children:(0,n.jsx)(s.default,{href:"/",children:(0,n.jsx)("a",{children:"<< Back to the city list"})})})]})})};e.default=function(t){var e=[(t.info.bb[0][1]+t.info.bb[1][1])/2,(t.info.bb[0][0]+t.info.bb[1][0])/2],r=l.Z().domain([0,3]).range(["red","white"]),a=l.Z().domain([0,3]).range(["orange","white"]);return(0,n.jsxs)(o.h,{center:e,zoom:12,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[(0,n.jsx)(c.I,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,n.jsx)(i.Q,{data:t.streets,style:function(t){return{color:(t.properties.slope<90?r:a)(t.properties.sun_diff)}},onEachFeature:function(t,e){var r=t.properties,n="difference from perfect alignment: ".concat(r.sun_diff.toPrecision(2)," degrees");r.name&&r.name.length>0&&(n="".concat(r.name,": ").concat(n)),e.bindTooltip(n)}}),(0,n.jsx)(m,{stats:t.stats,city:t.info,width:400})]})}}}]);